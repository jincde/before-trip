{% extends 'base.html' %}
{% load django_bootstrap5 %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'communities/css/style.css' %}">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
{% endblock css %}

{% block body %}
<!-- 네브바 높이 -->
<div style="height: 60px;"></div>
<!-- 후기 페이지 -->
{% if request.resolver_match.url_name == 'review' %}
<div class="community-header">
  <h1>
    후기
  </h1>
</div>
<div class="container">
  <div class="review-wrapper">
    <div class="notion-card">
      <div class="text">
        <p class="fw-bold">공지 사항</p>
        <hr>
        새로운 사항이 생겼습니다.
        <hr>
        새로운 공지사항2
      </div>
    </div>

    <!-- 베스트 리뷰 -->
    <div class="notion-card">
      <div class="text">
        <p class="fw-bold">베스트 리뷰</p>
        <hr>
        <div class="best-review row row-cols-2 g-4">
          <div class="col best-box">
            <div class="rank">
              <span class="rank_num">1</span>내용입니다.
            </div>
            <div class="rank">
              <span class="rank_num">2</span>내용입니다.
            </div>
            <div class="rank">
              <span class="rank_num">3</span>내용입니다.
            </div>
          </div>

          <div class="col best-box">
            <p>내용입니다.</p>
            <p>내용입니다.</p>
            <p>내용입니다.</p>
            <p>내용입니다.</p>
            <p>내용입니다.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- 글쓰기 -->
    <div class="create-wrapper">
      <a href="{% url 'communities:review_create' country_code %}">
        <div class="create">
          리뷰작성
          <img class="plane" src="{% static 'communities/img/create.png' %}" alt="">
        </div>
      </a>
    </div>

    <!-- 전체 글 목록 -->
    <div class="notion-card">
      <div class="text">
        {% for article in articles %}
        <div class="review-row">
          <div class="row row-cols-2">
            <div class="col">
              <a href="{% url 'communities:review_detail' article.pk %}">
                <p class="review-title mb-0">
                  {{ article.title }}
                </p>
              </a>
              <!-- 닉네임|작성일 -->
              <p class="review-date">{{ article.user }}|{{ article.created_at }}</p>
              <div class="icons-wrapper">
                <div class="icons">
                  <!-- 좋아요 -->
                  <div class="icon">
                    <span class="material-icons md-18">
                      thumb_up_alt
                    </span>
                    <span>{{ article.like_users.count }}</span>
                  </div>
                  <!-- 댓글 수 -->
                  <div class="icon">
                    <span class="material-icons md-18">
                      chat_bubble_outline
                    </span>
                    {{ article.articlecomment_set.all|length }}
                  </div>
                  <!-- 조회수 -->
                  <div class="icon">
                    <span class="material-icons md-18">
                      visibility
                    </span>
                    <span>3</span>
                  </div>
                </div>
              </div>

            </div>
            <div class="col review-list">
              {% if article.image %}
              <div>
                <img class="review-img" src="{{ article.image.url }}" alt="">
              </div>
              {% endif %}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

</div>
</div>

{% elif request.resolver_match.url_name == 'advice' %}
<h1>
  꿀팁
</h1>
{% elif request.resolver_match.url_name == 'feed' %}
<h1>
  피드
</h1>
{% endif %}
{% endblock %}