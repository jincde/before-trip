{% extends 'not_nav_base.html' %}
{% load static %}
{% load django_bootstrap5 %}
{% load django_bootstrap5 %}
{% block body %}
<div class="layer_fix" style="margin: 100px auto; max-width:336px;">
  <div style=" display: flex; justify-content: center;">
    <h1><a href="#" title="여행전날">여행전날</a></h1>
  </div>

  <div style="margin-top: 1rem;">
    <form action="" method='POST' class="signup-form" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="join-id">
        <input type="text" name="username" maxlength="150" autocapitalize="none" autocomplete="username" autofocus=""
          placeholder="아이디" required="" id="id_username">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000">
          <path d="M0 0h24v24H0z" fill="none" />
          <path
            d="M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38z" />
        </svg>
        <p class="feedback-id" style="font-size: 12px; color: #E74C3C; margin: 0 0 6px; height: 18px;"></p>
      </div>
      <div class="join-username" style="margin-bottom: 24px">
        <input type="text" name="nick_name" maxlength="30" placeholder="닉네임" required="" id="id_nick_name">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000">
          <path d="M0 0h24v24H0z" fill="none" />
          <path
            d="M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z" />
        </svg>
      </div>
      <div class="join-password1">
        <input type="password" name="password1" autocomplete="new-password" placeholder="비밀번호" required=""
          id="id_password1">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000">
          <path d="M0 0h24v24H0z" fill="none" />
          <path
            d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z" />
        </svg>
        <p class="feedback-pw" style="font-size: 12px; color: #E74C3C; margin: 0 0 6px; height: 18px;"></p>
      </div>
      <div class="join-password2">
        <input type="password" name="password2" autocomplete="new-password" placeholder="비밀번호 확인" required=""
          id="id_password2">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000">
          <path d="M0 0h24v24H0z" fill="none" />
          <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" />
        </svg>
        <p class="feedback-pw2" style="font-size: 12px; color: #E74C3C; margin: 0 0 6px; height: 18px;"></p>
      </div>
      <div class="join-photo">
        <label tabindex="0" for="id_profile_image" class="input-file-trigger1"
          style="position: relative; z-index: 2;">프로필 사진을
          넣어주세요</label>
        <input type="file" name="profile_image" accept="image/*" id="id_profile_image" class="input-file1"
          style="height: 46px; position: absolute; top: 0;">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000">
          <path d="M0 0h24v24H0z" fill="none" />
          <path
            d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5.04-6.71l-2.75 3.54-1.96-2.36L6.5 17h11l-3.54-4.71z" />
        </svg>
        <p class="file-return" style="height: 22px; margin: 0;"></p>
      </div>
      {% bootstrap_button button_type="submit" content="회원가입" %}

      <!-- {% bootstrap_form form %} -->

      {% comment %} {{ review_form.as_p }} {% endcomment %}

    </form>
  </div>
</div>

<script>
  document.querySelector('#id_username').addEventListener('input', function () {
    if (document.getElementById('id_username').value.length < 5) {
      document.querySelector('.feedback-id').innerHTML = "아이디는 5자 이상 입력해주세요."
    } else {
      document.querySelector('.feedback-id').innerHTML = '\u00A0';
    }
  })

  document.querySelector('#id_password1').addEventListener('input', function () {
    if (document.getElementById('id_password1').value.length < 8) {
      document.querySelector('.feedback-pw').innerHTML = "비밀번호는 8자 이상 입력해주세요."
    } else {
      document.querySelector('.feedback-pw').innerHTML = '\u00A0';
    }
  })

  document.querySelector('#id_password2').addEventListener('input', function () {
    const pw1 = document.querySelector('#id_password1').value;
    const pw2 = document.querySelector('#id_password2').value;
    if (pw1 != pw2) {
      document.querySelector('.feedback-pw2').innerHTML = "비밀번호가 일치하지 않습니다."
    } else {
      document.querySelector('.feedback-pw2').innerHTML = '\u00A0';
    }
  })
</script>

<script>
  @Controller
  @RequestMapping("/upload")
  public class FileUploadController {
    @Value("${custom.genFileDirPath}")
    private String genFileDirPath;    // 하드코딩 되어 있는 링크를 이렇게 변수로 관리한다.

    @RequestMapping("")
    @ResponseBody
    public String upload(@RequestParam("profile_image") MultipartFile profile_image) {
      try {
        profile_image.transferTo(new File(genFileDirPath + "/media"));
      } catch (IOException e) {
        throw new RuntimeException(e);
      }

      return "업로드 완료!";
    }
  }
  document.querySelector("html").classList.add('js');

  var fileInput = document.querySelector(".input-file1"),
    button = document.querySelector(".input-file-trigger1"),
    the_return = document.querySelector(".file-return");

  button.addEventListener("keydown", function (event) {
    if (event.keyCode == 13 || event.keyCode == 32) {
      fileInput.focus();
    }
  });
  button.addEventListener("click", function (event) {
    fileInput.focus();
    return false;
  });
  fileInput.addEventListener("change", function (event) {
    the_return.innerHTML = this.value;
  });  
</script>
{% comment %} <div class="background-size d-flex flex-column align-items-center justify-content-center">
  <div
    class="d-flex flex-column bg-white border border-2 border border-opacity-75 border-start-0 border-end-0 rounded-4 border-secondary shadow-lg">
    <h1 class="text-center mt-5 mb-3 fw-bold text-space">회원가입</h1>
    <form action="" method="POST" class="p-5 border-dark" enctype="multipart/form-data">
      {% csrf_token %}
      {% bootstrap_form form %}
      <div class="text-end">
        {% bootstrap_button button_type="submit" content="가입완료" button_class="btn btn-outline-info" %}
      </div>
    </form>
  </div>
</div> {% endcomment %}
{% endblock %}